# Implementation Plan

## Task Overview

本実装プランは、New Relic Service Level ManagementのハンズオンガイドをHTML形式で提供する機能の実装タスクを定義します。Vite + Tailwind CSS v4によるビルドシステムを構築し、座学セクション（スライド形式）、環境セットアップ、SLO設定・管理の3つの主要セクションを含む単一HTMLガイドを開発します。

## Implementation Tasks

- [ ] 1. Viteプロジェクトのセットアップとビルド環境構築
- [x] 1.1 (P) Viteプロジェクトの初期化とTailwind CSS v4の統合
  - `docs/`ディレクトリを作成し、Vite Vanilla TypeScriptテンプレートで初期化
  - Tailwind CSS v4と`@tailwindcss/vite`プラグインをnpm経由でインストール
  - `vite.config.js`でGitHub Pagesベースパス（`/slm-handson/`）を設定
  - `style.css`に`@import "tailwindcss";`を記述してTailwind CSSを有効化
  - `npm run dev`で開発サーバーが起動し、HMRが動作することを確認
  - _Requirements: 8.2_

- [x] 1.2 (P) Prism.jsのインストールとシンタックスハイライト設定
  - Prism.jsをnpmパッケージとしてインストール（Bash、YAML言語対応）
  - `main.js`でPrism.jsをインポートし、コードブロックのハイライトを初期化
  - テスト用コードブロックを作成し、Bashコマンドのシンタックスハイライトが動作することを確認
  - _Requirements: 5.1_

- [x] 1.3 (P) GitHub Actions CIワークフローの作成
  - `.github/workflows/deploy.yml`を作成し、mainブランチpush時のビルド＆デプロイワークフローを定義
  - Node.js 20環境でのビルド、`docs/dist/`アーティファクトのアップロード、GitHub Pagesへのデプロイを自動化
  - ワークフロー実行権限（`pages: write`, `id-token: write`）を設定
  - _Requirements: 8.2_

- [x] 2. HTMLドキュメントの基本構造とナビゲーションシステムの実装
- [x] 2.1 HTMLドキュメントの骨格作成とセマンティックHTML構造の定義
  - `docs/index.html`を作成し、ヘッダー、目次、セクション（座学/環境セットアップ/SLO管理）、フッターの基本構造を定義
  - 各セクションに一意のID（`#lecture`, `#setup`, `#slo-management`）を設定
  - `<meta charset="UTF-8">`と`<meta name="viewport">`でPCブラウザ対応を設定
  - Tailwind CSSクラス（`bg-gray-50 text-gray-900`）で基本スタイルを適用
  - _Requirements: 1.1, 1.2, 1.4_

- [x] 2.2 目次（Table of Contents）の実装とアンカーリンクの設定
  - `<nav id="toc">`内に、各セクションへのアンカーリンク（`#lecture`, `#setup`, `#slo-management`）を配置
  - Tailwind CSSでリスト形式の目次レイアウトを作成
  - CSSで`scroll-behavior: smooth;`を設定し、スムーススクロールを有効化
  - 各セクションへのリンクをクリックし、該当セクションへスクロールすることを確認
  - _Requirements: 1.3_

- [x] 2.3 ナビゲーションボタンと推奨時間インジケーターの実装
  - 各セクションの末尾に「前へ」「次へ」ボタンを配置（Tailwind CSSでスタイリング）
  - 座学セクションのヘッダーに「推奨時間: 20分」、環境セットアップに「推奨時間: 30分」、SLO管理に「推奨時間: 30分」、休憩セクションに「休憩時間: 10分」を表示
  - ボタンクリックで次のセクションへスクロールする動作を実装
  - _Requirements: 7.1, 7.2, 7.4_

- [x] 3. 座学セクション - スライドシステムの実装
- [x] 3.1 スライド表示エリアとスライドナビゲーションロジックの実装
  - `<section id="lecture">`内に、スライドコンテナと14枚のスライド用`<div class="slide">`を作成
  - JavaScriptで`currentSlideIndex`状態を管理し、1つのスライドのみを表示（他は`hidden`クラス）
  - 「次へ」「前へ」ボタンとキーボード操作（ArrowLeft/ArrowRight）でスライド切り替えを実装
  - スライド番号（例: 1/14）をリアルタイム表示
  - 最初のスライドで「前へ」ボタン無効化、最後のスライドで「次へ」ボタン無効化
  - _Requirements: 2.1, 2.13_

- [x] 3.2 座学コンテンツ - AI時代のSLMとユーザー視点の重要性スライドの作成
  - スライド1: 「AI時代におけるService Level Management」のタイトルとイントロダクション
  - スライド2: 従来の組織内成果物（月次報告、障害報告書等）がユーザー視点を欠いている問題を指摘
  - スライド3: ユーザー視点（高い可用性による良質なUX）とプロダクト視点（ユーザー数、利用量、単価）の違いを対比図で表示
  - スライド4: Service Level Managementにおいてユーザー視点を最優先すべき理由の解説
  - Tailwind CSSで大きなフォントサイズとセンタリングレイアウトを適用
  - _Requirements: 2.2, 2.3, 2.4, 2.5_

- [x] 3.3 座学コンテンツ - 可用性vs機能のトレードオフスライドの作成
  - スライド5: 「可用性 vs 機能」のトレードオフのタイトル
  - スライド6: Aのアプリ（タスク登録/削除のみ、絶対に期待通り動作）の説明
  - スライド7: Bのアプリ（Notion/Backlogのような魅力的機能、3回に1回操作失敗）の説明
  - スライド8: 信頼性を基準としたバランスの重要性を訴求
  - 対比表をTailwind CSSのグリッドレイアウトで視覚的に表示
  - _Requirements: 2.6, 2.7, 2.8_

- [x] 3.4 座学コンテンツ - SLOレベル比較表とコスト解説スライドの作成
  - スライド9: SLOレベル（99.9%, 99.99%, 99.999%）とダウンタイム許容時間の比較表を作成
  - スライド10: SLOに9を一つ追加するたびに必要となる労力とコストの指数関数的増加を解説
  - 比較表をTailwind CSSのテーブルレイアウトで実装（月間ダウンタイム: 43分、4.3分、26秒等）
  - _Requirements: 2.9, 2.10_

- [x] 3.5 座学コンテンツ - SLA/SLI/SLO定義とSLI/SLO設計ガイドラインスライドの作成
  - スライド11: SLA（Service Level Agreement）の定義 - 顧客との契約上の合意
  - スライド12: SLI（Service Level Indicator）の定義 - サービス品質の測定指標
  - スライド13: SLO（Service Level Objective）の定義 - 内部目標値
  - スライド14: SLIとSLOの設計方法（成功率ベース、レスポンスタイムベース）のガイドライン
  - 各定義をTailwind CSSのカードレイアウトで視覚的に区別
  - _Requirements: 2.11, 2.12, 2.14_

- [x] 4. 環境セットアップセクションの実装
- [x] 4.1 GitHub Codespacesセットアップ手順とNew Relic設定の実装
  - `<section id="setup">`内に、GitHub Codespacesの起動手順を段階的に記述
  - New Relic License Keyの取得方法とNew Relic UIへのアクセス手順を説明
  - `.env`ファイルの設定例（`NEW_RELIC_LICENSE_KEY=your-key-here`）をコードブロックで表示
  - Tailwind CSSで番号付きリストと強調表示を適用
  - _Requirements: 3.1, 3.2_

- [x] 4.2 Docker Compose起動コマンドとアクセス確認手順の実装
  - `docker compose up -d --build`コマンドをシンタックスハイライト付きコードブロックで表示
  - フロントエンド（`http://localhost:3000`）とAPI（`http://localhost:8080`）へのアクセス方法を説明
  - デモECサイトの動作確認手順（商品閲覧→カート追加→決済フロー）をステップバイステップで記述
  - _Requirements: 3.3, 3.4, 3.5_

- [x] 4.3 New Relic APM/RUMデータ確認手順の実装
  - New Relic APMでのトランザクションデータ確認手順を説明
  - New Relic Browser（RUM）でのページビューとAjaxリクエスト確認手順を説明
  - スクリーンショット用のプレースホルダー画像（`docs/images/newrelic-apm.png`等）を配置
  - 全ての画像に代替テキスト（alt属性）を設定
  - _Requirements: 3.6, 6.2, 6.5_

- [x] 5. SLO設定・管理セクションの実装
- [x] 5.1 ユーザージャーニー特定とSLI設計ワークフローの実装
  - `<section id="slo-management">`内に、ユーザージャーニーの特定方法（TOPページ→商品詳細→カート→決済）を説明
  - ユーザージャーニーフロー図をMermaidまたは画像で表示（`docs/images/user-journey.png`）
  - SLI設計のワークフロー（成功率ベース、レスポンスタイムベース）を段階的に解説
  - Tailwind CSSでフローチャート風のレイアウトを作成
  - _Requirements: 4.1, 4.2, 6.3_

- [x] 5.2 New Relic Service Level ManagementでのSLO作成手順の実装
  - New Relic UIでのSLO作成手順を詳細に記述（Service Level Management画面へのアクセス、SLI選択、SLO目標値設定）
  - スクリーンショット用のプレースホルダー画像（`docs/images/newrelic-slo-setup.png`）を配置
  - 具体的なSLO例（「商品詳細ページの成功率 >= 99.9%」「カート追加APIのレスポンスタイム95パーセンタイル < 300ms」）を提示
  - _Requirements: 4.3_

- [x] 5.3 パフォーマンス劣化シミュレーションとSLO違反体験手順の実装
  - 環境変数（`ERROR_RATE=0.3`, `RESPONSE_TIME_MAX=2000`）を変更してパフォーマンス劣化をシミュレートする手順を記述
  - `docker compose up -d api-server`コマンドでAPIサーバーを再起動する手順を説明
  - Playwrightベースの自動ユーザージャーニー負荷生成コマンド（`docker compose --profile playwright up playwright-generator`）を記述
  - New RelicダッシュボードでSLO違反を確認する手順を説明
  - _Requirements: 4.4, 4.5_

- [x] 5.4 エラーバジェット運用とアラート設定の実装
  - エラーバジェットの概念（許容エラー数）を解説
  - エラーバジェット消費状況の確認方法をNew Relic UIのスクリーンショット（`docs/images/error-budget.png`）とともに説明
  - SLO違反時のアラート設定手順を記述
  - エラーバジェット枯渇時の意思決定シナリオ（機能凍結 vs 改善優先）を提示
  - _Requirements: 4.6, 6.4_

- [x] 6. コードブロックと補助資料の統合
- [x] 6.1 (P) 全コードブロックへのPrism.jsシンタックスハイライト適用
  - 環境セットアップセクションとSLO管理セクションの全コマンドにPrism.jsのBash言語クラス（`language-bash`）を適用
  - `.env`ファイル例にYAML言語クラス（`language-yaml`）を適用
  - 各コードブロックの前に、コマンドの目的を説明する短い説明文を追加
  - Prism.jsのデフォルトテーマでハイライトが正しく表示されることを確認
  - _Requirements: 5.1, 5.2_

- [x] 6.2 (P) トラブルシューティングコマンドとコピーボタン（オプション）の実装
  - エラー発生時のトラブルシューティング用コマンド（`docker compose logs api-server`, `docker compose logs frontend`）をコードブロックで追加
  - コピーボタン機能を実装する場合、各コードブロックの右上に「コピー」ボタンを配置し、クリップボードAPIでコマンドをコピー
  - コピーボタンが実装されない場合は、この要件をスキップ
  - _Requirements: 5.3, 5.5_

- [x] 6.3 (P) 視覚的補助資料の配置とアーキテクチャ図の作成
  - `docs/images/`ディレクトリを作成し、プレースホルダー画像を配置
  - アーキテクチャ図（フロントエンド、バックエンド、New Relic連携）を作成し、`docs/images/architecture.png`として保存
  - 全ての`<img>`タグに代替テキスト（alt属性）を設定（例: `alt="New Relic APMトランザクション画面"`）
  - Tailwind CSSで画像の最大幅（`max-w-4xl`）とセンタリングを設定
  - _Requirements: 6.1, 6.5_

- [x] 7. ビルドとデプロイの検証
- [x] 7.1 ローカルビルドと静的ファイル生成の検証
  - `npm run build`を実行し、`docs/dist/`ディレクトリに`index.html`, `style.css`, `main.js`, `images/`が生成されることを確認
  - ビルド後のCSSファイル（`dist/style.css`）が最適化され、未使用Tailwind CSSクラスが削除されていることを確認
  - ビルド後のJSファイル（`dist/main.js`）にPrism.jsがバンドルされていることを確認
  - ビルドサイズが目標値（CSS < 50KB、JS < 100KB）を満たすことを確認
  - _Requirements: 8.2_

- [x] 7.2 Chrome最新版での動作確認とパフォーマンステスト
  - Chrome最新版で`dist/index.html`を開き、全セクション（目次、座学、環境セットアップ、SLO管理）が正しく表示されることを確認
  - スライドナビゲーション（「次へ」「前へ」ボタン、矢印キー）が動作することを確認
  - Lighthouseでパフォーマンス測定を実行し、First Contentful Paint < 1.5秒を確認
  - JavaScript無効時に基本コンテンツ（スライド以外のセクション）が表示されることを確認
  - _Requirements: 8.1, 8.3_

- [x] 7.3* Chrome最新版でのE2Eテスト（オプション）
  - 目次リンククリックで該当セクションへスムーススクロールすることを確認（要件1.3）
  - スライドナビゲーション（14枚すべて）が正常に動作することを確認（要件2.13）
  - 全画像が読み込まれ、alt属性が設定されていることを確認（要件6.5）
  - 全コードブロックがシンタックスハイライト表示されることを確認（要件5.1）
  - _Requirements: 1.3, 2.13, 5.1, 6.5_

## Requirements Coverage Matrix

| Requirement ID | Summary | Covered by Tasks |
|----------------|---------|------------------|
| 1.1 | 単一HTMLファイル構成 | 2.1 |
| 1.2 | PCブラウザ表示 | 2.1, 7.2 |
| 1.3 | 目次とアンカーリンク | 2.2, 7.3* |
| 1.4 | 視覚的なレイアウト | 2.1 |
| 1.5 | コードブロック、画像、リンク表示 | 6.1, 6.3 |
| 2.1 | プレゼンテーション形式 | 3.1 |
| 2.2 | AI時代のSLM説明 | 3.2 |
| 2.3 | 組織内成果物の問題指摘 | 3.2 |
| 2.4 | ユーザー視点とプロダクト視点の違い | 3.2 |
| 2.5 | ユーザー視点優先の理由 | 3.2 |
| 2.6 | 可用性vs機能のトレードオフ | 3.3 |
| 2.7 | 対比例（Aアプリ vs Bアプリ） | 3.3 |
| 2.8 | 信頼性基準のバランス | 3.3 |
| 2.9 | SLOレベル比較表 | 3.4 |
| 2.10 | 労力・コスト増加の解説 | 3.4 |
| 2.11 | SLA/SLI/SLO定義 | 3.5 |
| 2.12 | SLI/SLO設計ガイドライン | 3.5 |
| 2.13 | スライドナビゲーション | 3.1, 7.3* |
| 2.14 | 推奨時間（20分） | 2.3, 3.5 |
| 3.1 | GitHub Codespacesセットアップ | 4.1 |
| 3.2 | New Relic設定 | 4.1 |
| 3.3 | Docker起動コマンド | 4.2 |
| 3.4 | アクセス方法 | 4.2 |
| 3.5 | 動作確認手順 | 4.2 |
| 3.6 | APM/RUMデータ確認 | 4.3 |
| 3.7 | 推奨時間（30分） | 2.3 |
| 4.1 | ユーザージャーニー特定 | 5.1 |
| 4.2 | SLI設計ワークフロー | 5.1 |
| 4.3 | SLO作成手順 | 5.2 |
| 4.4 | パフォーマンス劣化シミュレーション | 5.3 |
| 4.5 | Playwright負荷生成コマンド | 5.3 |
| 4.6 | エラーバジェット運用とアラート | 5.4 |
| 4.7 | 推奨時間（30分） | 2.3 |
| 5.1 | シンタックスハイライト | 1.2, 6.1, 7.3* |
| 5.2 | コマンド説明文 | 6.1 |
| 5.3 | コピーボタン（オプション） | 6.2 |
| 5.4 | `.env`設定例 | 4.1 |
| 5.5 | トラブルシューティングコマンド | 6.2 |
| 6.1 | アーキテクチャ図 | 6.3 |
| 6.2 | SLO設定画面スクリーンショット | 5.2 |
| 6.3 | ユーザージャーニーフロー図 | 5.1 |
| 6.4 | SLO違反時ダッシュボード例 | 5.4 |
| 6.5 | 全画像にalt属性 | 4.3, 6.3, 7.3* |
| 7.1 | 推奨時間表示 | 2.3 |
| 7.2 | ナビゲーションボタン | 2.3 |
| 7.3 | ブレッドクラム/進捗インジケーター | - (単一ページのため不要) |
| 7.4 | 休憩時間表示 | 2.3 |
| 8.1 | Chrome最新版対応 | 7.2 |
| 8.2 | Tailwind CSS採用 | 1.1, 7.1 |
| 8.3 | JavaScript無効時の基本機能 | 7.2 |

## Task Dependencies

```
1.1, 1.2, 1.3 (並行可能)
  ↓
2.1 (HTMLドキュメント骨格作成)
  ↓
2.2, 2.3 (ナビゲーションシステム)
  ↓
3.1 (スライドシステム) → 3.2, 3.3, 3.4, 3.5 (座学コンテンツ - 並行可能)
  ↓
4.1, 4.2, 4.3 (環境セットアップ - 並行可能)
  ↓
5.1, 5.2, 5.3, 5.4 (SLO設定・管理 - 並行可能)
  ↓
6.1, 6.2, 6.3 (コードブロックと補助資料 - 並行可能)
  ↓
7.1 (ビルド検証)
  ↓
7.2 (動作確認)
  ↓
7.3* (E2Eテスト - オプション)
```

## Estimated Effort

- **タスク1**: 3-4時間（Viteセットアップ、Tailwind/Prism統合、GitHub Actions作成）
- **タスク2**: 2-3時間（HTMLドキュメント骨格、目次、ナビゲーションボタン）
- **タスク3**: 6-8時間（スライドシステム、14枚の座学コンテンツ作成）
- **タスク4**: 3-4時間（環境セットアップセクション、コマンド例、APM/RUM手順）
- **タスク5**: 4-5時間（SLO設定・管理セクション、シミュレーション手順、エラーバジェット）
- **タスク6**: 2-3時間（コードブロック統合、補助資料配置）
- **タスク7**: 2-3時間（ビルド検証、動作確認、パフォーマンステスト）

**合計推定時間**: 22-30時間
